# Terraform Variables Configuration Template
# Copy this file to terraform.tfvars and customize for your environment
# 
# IMPORTANT: The terraform.tfvars file should NOT be committed to version control
# Add it to .gitignore to prevent accidental credential exposure

# =============================================================================
# AZURE CONFIGURATION
# =============================================================================
# These values should match your Azure environment

# Azure Subscription ID (REQUIRED)
# Find: Azure Portal > Subscriptions > Copy "Subscription ID"
# subscription_id = "<YOUR_AZURE_SUBSCRIPTION_ID>"

# =============================================================================
# BASIC CONFIGURATION
# =============================================================================

# Name of the Azure Resource Group (must exist or be created separately)
# Recommendation: Use a descriptive name like "rocketchat-prod-rg" or "chat-dev-rg"
resource_group_name = "<YOUR_RESOURCE_GROUP_NAME>"

# AKS cluster name (will be used as prefix for related resources)
# Recommendation: Keep it short and descriptive (e.g., "rocketchat-aks", "chat-prod")
cluster_name = "<YOUR_CLUSTER_NAME>"

# Environment name (dev, staging, production)
# Used for tagging and resource organization
environment = "production"  # Options: dev, staging, production

# Current lifecycle stage (active, suspended, teardown)
# Used for automated lifecycle management
lifecycle_stage = "active"  # Options: active, suspended, teardown

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# DNS prefix for the AKS cluster (must be unique within Azure region)
dns_prefix = "rocketchat"

# Kubernetes version for the AKS cluster
# Check available versions: az aks get-versions --location <your-region> -o table
kubernetes_version = "1.28"

# Virtual Network address space (CIDR notation)
# Default is fine unless you have specific network requirements
vnet_address_space = "10.0.0.0/16"

# AKS subnet CIDR (must be within vnet_address_space)
aks_subnet_cidr = "10.0.1.0/24"

# Kubernetes service CIDR (must not overlap with vnet_address_space)
service_cidr = "10.1.0.0/16"

# DNS service IP (must be within service_cidr range)
dns_service_ip = "10.1.0.10"

# =============================================================================
# NODE POOL CONFIGURATION
# =============================================================================
# These settings control the size and capacity of your Kubernetes nodes

# System node pool configuration (for Kubernetes system components)
# DEV/TEST: 1 node, Standard_DS2_v2 (~$100/month)
# PRODUCTION: 2-3 nodes, Standard_DS3_v2 or larger
system_node_count = 1
system_node_size  = "Standard_DS2_v2"  # 2 vCPU, 7 GB RAM

# User node pool configuration (for your workloads)
# DEV/TEST: 1-2 nodes, Standard_DS2_v2 (~$100-200/month)
# PRODUCTION: 2-3 nodes, Standard_DS3_v2 or larger (~$300-500/month)
user_node_count = 2
user_node_size  = "Standard_DS2_v2"  # 2 vCPU, 7 GB RAM

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Source address prefix for SSH access to nodes
# RECOMMENDED: Restrict to your IP or VPN range (e.g., "203.0.113.0/24")
# WARNING: "0.0.0.0/0" allows SSH from anywhere - USE ONLY FOR TESTING
ssh_source_address_prefix = "0.0.0.0/0"  # Change this for production!

# =============================================================================
# LIFECYCLE MANAGEMENT
# =============================================================================

# Enable automatic teardown during billing cycles (cost optimization)
# Set to true if you want automated cluster lifecycle management
auto_teardown_enabled = true

# Prevent accidental destruction of the cluster
# Set to true for production environments
prevent_destroy = false  # Change to true for production!

# =============================================================================
# COST OPTIMIZATION
# =============================================================================

# Enable spot instances for non-critical workloads (can reduce costs by 60-80%)
# WARNING: Spot instances can be evicted at any time
enable_spot_instances = false

# Maximum price for spot instances (in USD per hour)
# Set to -1 to pay up to the on-demand price
spot_max_price = 0.1

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Enable full monitoring stack deployment (Prometheus, Grafana, Loki)
# This is deployed separately via Helm after Terraform creates the cluster
enable_monitoring = false  # Set via Helm, not Terraform

# Number of days to retain logs in Log Analytics Workspace
# DEV/TEST: 7-30 days, PRODUCTION: 30-90 days
log_retention_days = 30

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Number of days to retain MongoDB backups
backup_retention_days = 7  # Increase for production (30-90 days)

# Number of days to retain disk snapshots
snapshot_retention_days = 7  # Increase for production (30-90 days)

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
# Replace these with your actual domain names

# Domain name for Rocket.Chat application
# Example: "chat.example.com" or "rocketchat.mycompany.com"
rocketchat_domain = "<YOUR_DOMAIN>"

# Domain name for Grafana monitoring dashboard
# Example: "grafana.example.com" or "monitoring.mycompany.com"
# NOTE: Can be a subdomain of rocketchat_domain (e.g., "grafana.<YOUR_DOMAIN>")
grafana_domain = "<YOUR_GRAFANA_DOMAIN>"

# =============================================================================
# RESOURCE TAGS
# =============================================================================
# Additional tags to apply to all Azure resources for organization and cost tracking

additional_tags = {
  Owner       = "<YOUR_NAME_OR_TEAM>"           # Who owns this deployment
  Project     = "rocketchat-deployment"         # Project identifier
  CostCenter  = "<YOUR_COST_CENTER>"           # For billing purposes
  Department  = "<YOUR_DEPARTMENT>"            # Department/team name
  Contact     = "<YOUR_EMAIL>"                 # Contact email for issues
}

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================
# Before running terraform apply, ensure you have:
# 
# ✓ Replaced all <YOUR_*> placeholders with actual values
# ✓ Created the Azure Resource Group (or set it to be created)
# ✓ Configured Azure CLI authentication (az login)
# ✓ Set up DNS provider access for your domains
# ✓ Reviewed and adjusted node pool sizes for your needs
# ✓ Configured backup retention periods appropriately
# ✓ Set prevent_destroy = true for production deployments
# ✓ Restricted ssh_source_address_prefix for production
# 
# =============================================================================
